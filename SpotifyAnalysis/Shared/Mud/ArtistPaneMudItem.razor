@namespace SpotifyAnalysis.Shared
@using MudBlazor
@using Data.DTO


<MudItem xl="6" lg="12">
	<MudPaper Class="fullHeight pa-4">
		@if (Artist?.Genres is not null) {
			<MudStack Row=true Class="fullHeight" Justify="Justify.SpaceEvenly" AlignItems="AlignItems.Stretch">
				<MudStack Justify="Justify.SpaceBetween" AlignItems="AlignItems.Stretch">
					<MudInputLabel Class="mudItemTitle">@Artist.Name</MudInputLabel>
					<MudDataGrid Items="@Artist.Genres" Style="width: 300px" Dense=true >
						<Columns>
							<PropertyColumn Property="x => x" Title="Genres:" HeaderStyle="font-size: 16px ;width: 120px" />
						</Columns>
					</MudDataGrid>
					<div /> <!--for Justify.SpaceBetween to look better-->
				</MudStack>
				<MudStack Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center">
					<MudButton Href=@(artistLinkBase + Artist.ID)
							   Variant="Variant.Outlined"
							   Color="Color.Primary">
						Open in
						<MudImage Src=@spotifyLogoGreen Height="60" Elevation="25" Class="ma-4" />
					</MudButton>
					<MudImage Style="border: solid 1px white;" Src=@GetImage() Width="300" Height="300" Elevation="25" Class="ma-4" />
					<MudStack Class="fullWidth" AlignItems="AlignItems.Center">
						<MudInputLabel Style="font-size: 16px">Popularity</MudInputLabel>
						<MudProgressLinear Color="Color.Primary" Size="Size.Large" Value=@(Artist.Popularity ?? 0) />
					</MudStack>
				</MudStack>
			</MudStack>
		}
    </MudPaper>
</MudItem>

@code {
	[Parameter]
	public ArtistDTO Artist { get; set; }

	private const string wikiQuestionMark = "https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Question_mark_%28black%29.svg/220px-Question_mark_%28black%29.svg.png";
	private const string spotifyLogoGreen = "https://storage.googleapis.com/pr-newsroom-wp/1/2021/02/Spotify_Logo_RGB_Green.png";
	private const string artistLinkBase = "spotify:artist:";

	internal string GetImage() {
		var image = Artist.Images.FirstOrDefault();
		return image != null ? image.Url : wikiQuestionMark;
	}
}
